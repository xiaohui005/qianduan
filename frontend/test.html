<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>测试页面</title>
</head>
<body>
  <h1>JS文件加载测试</h1>
  <div id="result"></div>

  <script>
    const result = document.getElementById('result');
    const filesToTest = [
      'js/core/state.js',
      'js/core/errorHandler.js',
      'js/core/ui.js',
      'js/core/common.js',
      'js/config.js',
      'js/utils.js',
      'js/api.js',
      'js/pages.js'
    ];

    let html = '<h2>文件加载状态：</h2>';
    let loadCount = 0;

    filesToTest.forEach((file, index) => {
      const script = document.createElement('script');
      script.src = file;
      script.onload = () => {
        html += `<p style="color:green">✓ ${file} - 加载成功</p>`;
        loadCount++;
        if (loadCount === filesToTest.length) {
          result.innerHTML = html + '<h2 style="color:green">所有文件加载成功！</h2>';
        } else {
          result.innerHTML = html;
        }
      };
      script.onerror = () => {
        html += `<p style="color:red">✗ ${file} - 加载失败</p>`;
        loadCount++;
        result.innerHTML = html;
      };
      document.head.appendChild(script);
    });

    // 测试后端连接
    setTimeout(() => {
      fetch('http://localhost:8000/')
        .then(res => res.json())
        .then(data => {
          html += '<h2 style="color:green">✓ 后端API连接成功</h2>';
          html += `<p>响应: ${JSON.stringify(data)}</p>`;
          result.innerHTML = html;
        })
        .catch(err => {
          html += '<h2 style="color:red">✗ 后端API连接失败</h2>';
          html += `<p>错误: ${err.message}</p>`;
          result.innerHTML = html;
        });
    }, 2000);
  </script>
</body>
</html>

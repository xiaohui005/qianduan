<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cocosæ¸¸æˆèµ„æºæå–å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ff8a00, #da1b60);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 20px;
        }
        
        .warning {
            background: rgba(231, 76, 60, 0.3);
            border: 1px solid #e74c3c;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .url-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .url-input input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        
        .url-input input:focus {
            outline: none;
            box-shadow: 0 0 0 2px #3498db;
        }
        
        .method-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .method-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .method-card:hover {
            transform: translateY(-5px);
            border-color: #3498db;
        }
        
        .method-card.selected {
            border-color: #2ecc71;
            background: rgba(46, 204, 113, 0.2);
        }
        
        .method-card h3 {
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        button {
            background: linear-gradient(to right, #3498db, #8e44ad);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.3);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #00b09b, #96c93d);
        }
        
        .btn-danger {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
        }
        
        .btn-warning {
            background: linear-gradient(to right, #f46b45, #eea849);
        }
        
        .status {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e74c3c;
            animation: pulse 2s infinite;
        }
        
        .status-indicator.active {
            background: #2ecc71;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .resource-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .resource-card:hover {
            transform: translateY(-5px);
        }
        
        .resource-preview {
            width: 100%;
            height: 150px;
            object-fit: contain;
            background: #2c3e50;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .resource-info {
            padding: 15px;
        }
        
        .resource-url {
            font-size: 0.85rem;
            word-break: break-all;
            margin-bottom: 10px;
            opacity: 0.8;
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #00b09b, #96c93d);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .instructions h3 {
            margin-bottom: 15px;
            color: #3498db;
        }
        
        .instructions ol {
            margin-left: 20px;
            line-height: 1.6;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        .instructions code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            
            .url-input {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .results {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Cocosæ¸¸æˆèµ„æºæå–å·¥å…·</h1>
            <p class="subtitle">ä¸“é—¨é’ˆå¯¹Cocosæ¸¸æˆçš„é«˜çº§èµ„æºæå–æ–¹æ¡ˆ</p>
        </header>
        
        <div class="warning">
            <strong>æ³¨æ„ï¼š</strong>ç”±äºCocosæ¸¸æˆçš„ç‰¹æ®Šæ€§ï¼ˆCanvasæ¸²æŸ“ã€èµ„æºåŠ å¯†ï¼‰ï¼Œä¼ ç»Ÿæ–¹æ³•æ— æ³•ç›´æ¥æå–èµ„æºã€‚è¯·ä½¿ç”¨ä»¥ä¸‹ä¸“ä¸šæ–¹æ³•ã€‚
        </div>
        
        <div class="url-input">
            <input type="url" id="pageUrl" placeholder="è¯·è¾“å…¥Cocosæ¸¸æˆé¡µé¢URL" value="https://betup.cc/">
            <button id="scrapeUrlBtn" class="btn-primary">åˆ†æé¡µé¢</button>
        </div>
        
        <div class="method-selection">
            <div class="method-card" data-method="network">
                <h3>æ–¹æ³•ä¸€ï¼šç½‘ç»œç›‘æ§</h3>
                <p>ç›‘æ§ç½‘ç»œè¯·æ±‚ï¼Œæ•è·æ¸¸æˆåŠ è½½æ—¶ä¸‹è½½çš„èµ„æºæ–‡ä»¶</p>
                <ul>
                    <li>æå–å›¾ç‰‡ã€éŸ³é¢‘ã€é…ç½®æ–‡ä»¶</li>
                    <li>è·å–åŸå§‹èµ„æºæ–‡ä»¶</li>
                    <li>æ”¯æŒåŠ å¯†èµ„æº</li>
                </ul>
            </div>
            
            <div class="method-card" data-method="memory">
                <h3>æ–¹æ³•äºŒï¼šå†…å­˜åˆ†æ</h3>
                <p>åˆ†ææ¸¸æˆè¿è¡Œæ—¶å†…å­˜ä¸­çš„èµ„æºæ•°æ®</p>
                <ul>
                    <li>æå–å·²è§£å¯†çš„çº¹ç†</li>
                    <li>è·å–ç²¾çµè¡¨æ•°æ®</li>
                    <li>æ·±åº¦èµ„æºæå–</li>
                </ul>
            </div>
            
            <div class="method-card" data-method="canvas">
                <h3>æ–¹æ³•ä¸‰ï¼šCanvasæˆªå›¾</h3>
                <p>é€šè¿‡Canvas APIæå–æ¸²æŸ“å†…å®¹</p>
                <ul>
                    <li>æˆªå–æ¸¸æˆç”»é¢</li>
                    <li>æå–UIå…ƒç´ </li>
                    <li>å®æ—¶ç”»é¢æ•è·</li>
                </ul>
            </div>
        </div>
        
        <div class="controls">
            <button id="startBtn" class="btn-primary">å¼€å§‹æå–</button>
            <button id="downloadBtn">ä¸‹è½½èµ„æºåŒ…</button>
            <button id="inspectBtn" class="btn-warning">å¼€å‘è€…å·¥å…·æŒ‡å—</button>
            <button id="clearBtn" class="btn-danger">æ¸…ç©ºç»“æœ</button>
        </div>
        
        <div class="status">
            <div class="status-indicator" id="statusIndicator"></div>
            <span id="statusText">é€‰æ‹©æå–æ–¹æ³•å¹¶ç‚¹å‡»å¼€å§‹æå–</span>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>
        
        <div class="results" id="resultsContainer">
            <!-- æå–ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
        
        <div class="instructions">
            <h3>Cocosæ¸¸æˆèµ„æºæå–æŒ‡å—</h3>
            <ol>
                <li><strong>æ‰“å¼€ç›®æ ‡æ¸¸æˆé¡µé¢</strong> - åœ¨æµè§ˆå™¨ä¸­è®¿é—®Cocosæ¸¸æˆ</li>
                <li><strong>æ‰“å¼€å¼€å‘è€…å·¥å…·</strong> - æŒ‰F12æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</li>
                <li><strong>ç½‘ç»œç›‘æ§</strong>ï¼š
                    <ul>
                        <li>åˆ‡æ¢åˆ°Networkæ ‡ç­¾</li>
                        <li>åˆ·æ–°é¡µé¢æ•è·æ‰€æœ‰è¯·æ±‚</li>
                        <li>ç­›é€‰å›¾ç‰‡(png,jpg)ã€éŸ³é¢‘(mp3,wav)ã€æ•°æ®æ–‡ä»¶(json,plist)</li>
                    </ul>
                </li>
                <li><strong>å†…å­˜åˆ†æ</strong>ï¼š
                    <ul>
                        <li>åœ¨Consoleä¸­æ‰§è¡Œå†…å­˜æ£€æŸ¥å‘½ä»¤</li>
                        <li>ä½¿ç”¨æµè§ˆå™¨å†…å­˜å¿«ç…§åŠŸèƒ½</li>
                    </ul>
                </li>
                <li><strong>èµ„æºè§£å¯†</strong> - å¯¹äºåŠ å¯†èµ„æºï¼Œéœ€è¦åˆ†æè§£å¯†ç®—æ³•</li>
            </ol>
            
            <h4>å®ç”¨ä»£ç ç‰‡æ®µï¼ˆåœ¨å¼€å‘è€…å·¥å…·Consoleä¸­æ‰§è¡Œï¼‰ï¼š</h4>
            <pre><code>// ç›‘æ§Canvaså†…å®¹
const canvas = document.querySelector('canvas');
const dataURL = canvas.toDataURL('image/png');

// è·å–æ‰€æœ‰å›¾ç‰‡èµ„æº
const images = performance.getEntriesByType('resource')
    .filter(r => r.name.match(/\.(png|jpg|jpeg|gif|webp)$/));

// æ£€æŸ¥Cocosèµ„æºç®¡ç†å™¨
if (cc && cc.assetManager) {
    console.log('Cocosèµ„æºç®¡ç†å™¨å¯ç”¨');
}</code></pre>
        </div>
        
        <footer>
            <p>Cocosæ¸¸æˆèµ„æºæå–å·¥å…· &copy; 2023 - ä¸“ä¸šæ¸¸æˆèµ„æºåˆ†æ</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pageUrlInput = document.getElementById('pageUrl');
            const scrapeUrlBtn = document.getElementById('scrapeUrlBtn');
            const startBtn = document.getElementById('startBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const inspectBtn = document.getElementById('inspectBtn');
            const clearBtn = document.getElementById('clearBtn');
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            const progressBar = document.getElementById('progressBar');
            const resultsContainer = document.getElementById('resultsContainer');
            const methodCards = document.querySelectorAll('.method-card');
            
            let selectedMethod = 'network';
            let extractedResources = [];
            
            // è®¾ç½®ç¤ºä¾‹URL
            pageUrlInput.value = 'https://betup.cc/';
            
            // é€‰æ‹©æå–æ–¹æ³•
            methodCards.forEach(card => {
                card.addEventListener('click', function() {
                    methodCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedMethod = this.dataset.method;
                    statusText.textContent = `å·²é€‰æ‹©: ${getMethodName(selectedMethod)}`;
                });
            });
            
            // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªæ–¹æ³•
            methodCards[0].classList.add('selected');
            
            function getMethodName(method) {
                const names = {
                    'network': 'ç½‘ç»œç›‘æ§',
                    'memory': 'å†…å­˜åˆ†æ', 
                    'canvas': 'Canvasæˆªå›¾'
                };
                return names[method] || method;
            }
            
            // åˆ†æé¡µé¢
            scrapeUrlBtn.addEventListener('click', function() {
                const url = pageUrlInput.value.trim();
                if (!url) {
                    alert('è¯·è¾“å…¥è¦åˆ†æçš„é¡µé¢URL');
                    return;
                }
                
                statusText.textContent = 'æ­£åœ¨åˆ†æé¡µé¢ç»“æ„...';
                statusIndicator.classList.remove('active');
                
                // æ¨¡æ‹Ÿåˆ†æè¿‡ç¨‹
                simulateAnalysis();
            });
            
            // å¼€å§‹æå–
            startBtn.addEventListener('click', function() {
                statusIndicator.classList.remove('active');
                statusText.textContent = `æ­£åœ¨ä½¿ç”¨${getMethodName(selectedMethod)}æ–¹æ³•æå–èµ„æº...`;
                progressBar.style.width = '0%';
                
                // æ ¹æ®é€‰æ‹©çš„æ–¹æ³•æ‰§è¡Œæå–
                extractResources(selectedMethod);
            });
            
            function simulateAnalysis() {
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    if (progress >= 90) clearInterval(progressInterval);
                }, 100);
                
                setTimeout(() => {
                    // æ¨¡æ‹Ÿåˆ†æç»“æœ
                    const analysisResult = {
                        hasCanvas: true,
                        hasCocos: true,
                        resourceCount: 23,
                        encrypted: true,
                        canvasSize: { width: 1280, height: 720 }
                    };
                    
                    displayAnalysisResult(analysisResult);
                    
                    progressBar.style.width = '100%';
                    statusIndicator.classList.add('active');
                    statusText.textContent = `åˆ†æå®Œæˆ: æ£€æµ‹åˆ°Cocosæ¸¸æˆï¼Œé¢„è®¡${analysisResult.resourceCount}ä¸ªèµ„æºæ–‡ä»¶`;
                    
                    setTimeout(() => {
                        progressBar.style.width = '0%';
                    }, 2000);
                }, 1500);
            }
            
            function displayAnalysisResult(result) {
                resultsContainer.innerHTML = `
                    <div class="resource-card" style="grid-column: 1 / -1;">
                        <div class="resource-info">
                            <h3>é¡µé¢åˆ†æç»“æœ</h3>
                            <p><strong>Canvasæ£€æµ‹:</strong> ${result.hasCanvas ? 'âœ“ å­˜åœ¨' : 'âœ— ä¸å­˜åœ¨'}</p>
                            <p><strong>Cocoså¼•æ“:</strong> ${result.hasCocos ? 'âœ“ æ£€æµ‹åˆ°' : 'âœ— æœªæ£€æµ‹åˆ°'}</p>
                            <p><strong>èµ„æºæ•°é‡:</strong> é¢„è®¡ ${result.resourceCount} ä¸ªæ–‡ä»¶</p>
                            <p><strong>åŠ å¯†çŠ¶æ€:</strong> ${result.encrypted ? 'ğŸ”’ å·²åŠ å¯†' : 'ğŸ”“ æœªåŠ å¯†'}</p>
                            <p><strong>ç”»å¸ƒå°ºå¯¸:</strong> ${result.canvasSize.width} Ã— ${result.canvasSize.height}</p>
                        </div>
                    </div>
                `;
            }
            
            function extractResources(method) {
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 3;
                    progressBar.style.width = `${progress}%`;
                    if (progress >= 90) clearInterval(progressInterval);
                }, 100);
                
                setTimeout(() => {
                    // æ¨¡æ‹Ÿæå–ç»“æœ
                    extractedResources = generateMockResources();
                    
                    displayExtractedResources();
                    
                    progressBar.style.width = '100%';
                    statusIndicator.classList.add('active');
                    statusText.textContent = `æå–å®Œæˆ: è·å¾— ${extractedResources.length} ä¸ªèµ„æºæ–‡ä»¶`;
                    
                    setTimeout(() => {
                        progressBar.style.width = '0%';
                    }, 2000);
                }, 2000);
            }
            
            function generateMockResources() {
                const resources = [];
                const types = ['texture', 'sprite', 'ui', 'background', 'icon'];
                const extensions = ['.png', '.jpg', '.plist', '.json'];
                
                for (let i = 1; i <= 15; i++) {
                    const type = types[Math.floor(Math.random() * types.length)];
                    const ext = extensions[Math.floor(Math.random() * extensions.length)];
                    
                    resources.push({
                        name: `resource_${i}${ext}`,
                        type: type,
                        size: Math.floor(Math.random() * 500) + 50 + ' KB',
                        url: `https://betup.cc/assets/${type}s/res_${i}${ext}`,
                        encrypted: Math.random() > 0.7
                    });
                }
                
                return resources;
            }
            
            function displayExtractedResources() {
                resultsContainer.innerHTML = '';
                
                if (extractedResources.length === 0) {
                    resultsContainer.innerHTML = '<div style="text-align: center; padding: 40px; opacity: 0.7;">æœªæå–åˆ°ä»»ä½•èµ„æº</div>';
                    return;
                }
                
                extractedResources.forEach((resource, index) => {
                    const card = document.createElement('div');
                    card.className = 'resource-card';
                    
                    const encryptedBadge = resource.encrypted ? 
                        '<span style="background: #e74c3c; color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.7rem; margin-left: 5px;">åŠ å¯†</span>' : 
                        '';
                    
                    card.innerHTML = `
                        <div class="resource-preview" style="display: flex; align-items: center; justify-content: center; color: #7f8c8d;">
                            ${resource.type.toUpperCase()}<br>${resource.name}
                        </div>
                        <div class="resource-info">
                            <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                <strong>${resource.name}</strong>
                                ${encryptedBadge}
                            </div>
                            <div class="resource-url">${resource.url}</div>
                            <div><strong>ç±»å‹:</strong> ${resource.type} | <strong>å¤§å°:</strong> ${resource.size}</div>
                        </div>
                    `;
                    
                    resultsContainer.appendChild(card);
                });
            }
            
            // ä¸‹è½½èµ„æºåŒ…
            downloadBtn.addEventListener('click', function() {
                if (extractedResources.length === 0) {
                    alert('è¯·å…ˆæå–èµ„æºï¼');
                    return;
                }
                
                statusText.textContent = 'æ­£åœ¨ç”Ÿæˆèµ„æºåŒ…...';
                
                // åˆ›å»ºæ¨¡æ‹Ÿä¸‹è½½
                setTimeout(() => {
                    const link = document.createElement('a');
                    link.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(
                        `Cocosèµ„æºæå–æŠ¥å‘Š\n\n` +
                        `æå–æ—¶é—´: ${new Date().toLocaleString()}\n` +
                        `æå–æ–¹æ³•: ${getMethodName(selectedMethod)}\n` +
                        `èµ„æºæ•°é‡: ${extractedResources.length}\n\n` +
                        extractedResources.map(r => `- ${r.name} (${r.type}, ${r.size})`).join('\n')
                    );
                    link.download = `cocos_resources_${Date.now()}.txt`;
                    link.click();
                    
                    statusText.textContent = 'èµ„æºåŒ…å·²ä¸‹è½½';
                }, 1000);
            });
            
            // å¼€å‘è€…å·¥å…·æŒ‡å—
            inspectBtn.addEventListener('click', function() {
                const guide = `
                    <div class="resource-card" style="grid-column: 1 / -1;">
                        <div class="resource-info">
                            <h3>Chromeå¼€å‘è€…å·¥å…·å®ç”¨æŒ‡å—</h3>
                            
                            <h4>1. ç½‘ç»œç›‘æ§</h4>
                            <ul>
                                <li>æŒ‰F12 â†’ Networkæ ‡ç­¾</li>
                                <li>åˆ·æ–°é¡µé¢æ•è·æ‰€æœ‰è¯·æ±‚</li>
                                <li>ä½¿ç”¨Filterç­›é€‰: png|jpg|json|plist|mp3</li>
                                <li>å³é”®èµ„æº â†’ Copy â†’ Copy link address</li>
                            </ul>
                            
                            <h4>2. æ§åˆ¶å°å‘½ä»¤</h4>
                            <pre><code>// è·å–æ‰€æœ‰Canvaså…ƒç´ 
document.querySelectorAll('canvas');

// æˆªå›¾Canvas
document.querySelector('canvas').toDataURL();

// ç›‘æ§èµ„æºåŠ è½½
performance.getEntriesByType('resource');</code></pre>
                            
                            <h4>3. å†…å­˜åˆ†æ</h4>
                            <ul>
                                <li>Memoryæ ‡ç­¾ â†’ Take heap snapshot</li>
                                <li>æœç´¢: texture, sprite, image</li>
                            </ul>
                            
                            <h4>4. æºä»£ç è°ƒè¯•</h4>
                            <ul>
                                <li>Sourcesæ ‡ç­¾ â†’ Page â†’ js/ ç›®å½•</li>
                                <li>æŸ¥æ‰¾èµ„æºåŠ è½½ç›¸å…³ä»£ç </li>
                            </ul>
                        </div>
                    </div>
                `;
                
                resultsContainer.innerHTML = guide;
            });
            
            // æ¸…ç©ºç»“æœ
            clearBtn.addEventListener('click', function() {
                extractedResources = [];
                resultsContainer.innerHTML = '';
                statusIndicator.classList.remove('active');
                statusText.textContent = 'å·²æ¸…ç©ºæ‰€æœ‰ç»“æœ';
                progressBar.style.width = '0%';
            });
        });
    </script>
</body>
</html>
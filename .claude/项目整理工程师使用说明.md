# 项目整理工程师使用说明

## 概述

项目整理工程师是一个自动化工作流，负责协调项目的整理、测试、质量检查和代码提交。

## 使用方法

### 方式1：使用Slash Command（推荐）

在Claude Code中直接输入：

```
/organize-project
```

系统会自动执行完整的工作流：
1. 项目整理和规范检查
2. 调用测试工程师进行全面测试
3. 代码质量检测
4. 问题修复（如有）
5. Git提交（通过检查后）

### 方式2：手动调用

如果需要更细粒度的控制，可以这样使用：

```
请作为项目整理工程师，执行以下任务：
1. 检查项目结构和代码规范
2. 调用测试工程师检查代码质量
3. 发现问题后修复
4. 通过后提交到git
```

## 工作流程详解

### 阶段1：项目整理
- ✅ 检查文件大小（Python≤800行，JS≤800行）
- ✅ 检查是否使用工具箱函数（backend/utils/）
- ✅ 检查重复代码
- ✅ 检查数据库操作规范
- ✅ 生成整理报告

### 阶段2：测试检查
- 🧪 调用 test-engineer-cn agent
- 🧪 功能测试
- 🧪 边界条件测试
- 🧪 异常处理测试
- 🧪 数据库和API测试

### 阶段3：代码质量检测
- 🔍 代码复杂度分析
- 🔍 潜在bug检查
- 🔍 安全问题检查
- 🔍 性能问题检查
- 🔍 最佳实践检查

### 阶段4：问题修复
- 🔧 前端问题：调用前端工程师agent修复
- 🔧 后端问题：调用后端工程师agent修复
- 🔧 修复后重新测试验证

### 阶段5：Git提交
- 📝 查看修改（git status, git diff）
- 📝 生成中文提交信息（格式：`<type>: <描述>`）
- 📝 创建commit
- 📝 提交到仓库

## 输出示例

```
📋 项目整理工程师工作报告

✅ 阶段1：项目整理 - 完成
   - 检查了 15 个Python文件
   - 发现 2 个文件超过800行：
     * backend/routes/analysis.py (1969行) ⚠️
     * frontend/upload.js (7744行) ⚠️
   - 发现 3 处未使用工具箱函数的代码

✅ 阶段2：测试检查 - 完成
   - 功能测试：通过 ✓
   - 边界条件测试：发现1个问题 ⚠️
   - 异常处理测试：通过 ✓

🔧 阶段4：问题修复 - 完成
   - 修复了边界条件问题
   - 重新测试：通过 ✓

📝 阶段5：Git提交 - 完成
   - 提交信息：refactor: 优化数据库操作，统一使用工具箱函数
   - 文件修改数：5个
   - Commit ID: abc1234
```

## 注意事项

1. **执行前确保**：
   - 当前代码可以正常运行
   - 数据库连接正常
   - 已保存所有未保存的修改

2. **执行中**：
   - 工作流会使用TodoWrite跟踪进度
   - 可以随时查看当前阶段
   - 发现严重问题会先询问用户

3. **执行后**：
   - 检查Git提交是否符合预期
   - 查看修复的代码是否正确
   - 如有问题可以回滚（git reset）

## 自定义配置

如需修改工作流，编辑文件：
```
.claude/commands/organize-project.md
```

可以调整：
- 检查项目
- 测试范围
- 提交规则
- 问题修复策略

## 常见问题

**Q: 工作流执行时间多长？**
A: 通常5-15分钟，取决于项目大小和发现的问题数量。

**Q: 可以跳过某些阶段吗？**
A: 可以，使用手动调用方式，指定需要执行的阶段。

**Q: 发现问题但不想自动修复怎么办？**
A: 工作流会先报告问题，等待确认后再修复。你可以选择手动修复。

**Q: 提交前想再次确认怎么办？**
A: 工作流在提交前会显示所有改动，你可以选择取消提交。

## 相关文档

- 项目规范：`CLAUDE.md`
- 工具箱使用：`backend/utils/README.md`
- Git提交规范：参考项目提交历史

# 🎰 彩票分析系统 - 托盘服务版

> 后台静默运行，系统托盘管理，一键访问

## ⚡ 快速开始（3步）

### 1️⃣ 安装依赖
```
双击运行：安装依赖.bat
```

### 2️⃣ 启动服务
```
双击运行：启动托盘服务.bat
```

### 3️⃣ 访问系统
- **右键托盘图标** → 打开网页
- **或直接访问**: http://localhost:8080

---

## ✨ 核心功能

| 功能 | 说明 |
|------|------|
| 🖥️ **后台运行** | 无窗口静默运行，不打扰 |
| 📍 **托盘图标** | 绿色"彩"字图标，右下角显示 |
| 🌐 **一键访问** | 右键菜单快速打开网页 |
| 🔄 **服务管理** | 查看状态、重启服务 |
| 🚀 **开机自启** | 可配置开机自动运行 |

---

## 📋 托盘菜单

右键点击托盘图标：

- ✅ **打开网页** - 在浏览器中打开系统
- 📊 **查看状态** - 显示服务运行状态
- 🔄 **重启服务** - 重启前后端服务
- ❌ **退出** - 关闭所有服务

---

## 🎯 使用场景

### 场景 1：日常使用
1. 开机后双击 `启动托盘服务.bat`
2. 托盘出现图标，服务已启动
3. 需要使用时，直接访问 http://localhost:8080
4. 用完后继续在后台运行，或右键退出

### 场景 2：开机自启动
1. 阅读 `开机自启动配置.md`
2. 设置开机自启动（3 种方式可选）
3. 重启电脑，服务自动运行
4. 以后每次开机都会自动启动

---

## 📁 重要文件

| 文件 | 用途 |
|------|------|
| `tray_app.py` | 托盘主程序 |
| `service_manager.py` | 服务管理模块 |
| `启动托盘服务.bat` | 启动脚本 |
| `启动托盘服务.vbs` | VBS 静默启动 |
| `安装依赖.bat` | 安装依赖包 |
| `托盘服务使用说明.md` | 详细使用说明 |
| `开机自启动配置.md` | 自启动配置指南 |

---

## 🔧 技术架构

```
托盘应用 (tray_app.py)
    ↓
服务管理器 (service_manager.py)
    ↓
    ├── 后端服务 (FastAPI, 端口 8000)
    └── 前端服务 (HTTP Server, 端口 8080)
```

---

## 🛠️ 依赖包

- `pystray` - 系统托盘图标
- `Pillow` - 图像处理
- `psutil` - 进程管理
- `requests` - HTTP 请求

安装命令：
```bash
pip install -r requirements_tray.txt
```

---

## 🚨 常见问题

### Q: 图标没有出现？
**A**: 点击任务栏右下角 **^** 查看隐藏图标

### Q: 无法访问网页？
**A**: 右键图标 → "重启服务"

### Q: 如何退出？
**A**: 右键图标 → "退出"

### Q: 如何查看日志？
**A**: 打开 `logs/tray_app.log`

更多问题请查看：`托盘服务使用说明.md`

---

## 📝 日志位置

- 托盘服务日志：`logs/tray_app.log`
- 后端服务日志：控制台输出（被重定向到 DEVNULL）

---

## 🔗 访问地址

- **前端界面**: http://localhost:8080
- **后端 API**: http://localhost:8000
- **API 文档**: http://localhost:8000/docs

---

## 💡 提示

1. **首次使用**必须先运行 `安装依赖.bat`
2. **推荐使用** `启动托盘服务.vbs` 完全静默启动
3. **配置自启动**后，每次开机自动运行
4. **不用时**可以让它在后台运行，几乎不占资源

---

## 📚 文档索引

- [详细使用说明](托盘服务使用说明.md)
- [开机自启动配置](开机自启动配置.md)
- [项目总体说明](CLAUDE.md)

---

**享受无感的后台服务体验！** 🎉

有问题？查看 `托盘服务使用说明.md` 或检查 `logs/tray_app.log`
